---
import Layout from '../layouts/Layout.astro';
const base = import.meta.env.BASE_URL;
---

<Layout title="Поиск — Блог Карповой Ольги" description="Поиск по статьям блога о здоровом образе жизни, питании и полезных привычках.">
    <!-- Хлебные крошки -->
    <nav class="text-sm text-gray-500 mb-6 flex items-center flex-wrap gap-1">
        <a href={base} class="hover:text-[rgb(var(--accent))] transition-colors">Главная</a>
        <svg class="w-4 h-4 text-gray-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
        <span class="text-gray-700">Поиск</span>
    </nav>

    <h1 class="text-3xl font-extrabold text-gray-900 mb-8">Поиск по блогу</h1>

    <div id="search" class="max-w-2xl mx-auto"></div>

    <link href={`${base}pagefind/pagefind-ui.css`} rel="stylesheet" />
    <script is:inline define:vars={{ base }}>
        window.__pagefind_base = base;
    </script>
    <script is:inline src={`${import.meta.env.BASE_URL}pagefind/pagefind-ui.js`}></script>
    <script is:inline>
        document.addEventListener('astro:page-load', () => {
            const el = document.getElementById('search');
            if (el && typeof PagefindUI !== 'undefined') {
                el.innerHTML = '';
                new PagefindUI({
                    element: '#search',
                    showSubResults: true,
                    translations: {
                        placeholder: 'Введите запрос...',
                        zero_results: 'Ничего не найдено по запросу «[SEARCH_TERM]»',
                        many_results: 'Найдено [COUNT] результатов по запросу «[SEARCH_TERM]»',
                        one_result: 'Найден [COUNT] результат по запросу «[SEARCH_TERM]»',
                        searching: 'Ищем «[SEARCH_TERM]»...',
                    }
                });
            }
        });
    </script>

    <style is:global>
        .pagefind-ui__search-input {
            border-radius: 0.75rem !important;
            border: 2px solid #e5e7eb !important;
            padding: 0.75rem 1rem 0.75rem 3rem !important;
            font-size: 1.1rem !important;
            width: 100% !important;
            box-sizing: border-box !important;
        }
        .pagefind-ui__search-input:focus {
            border-color: rgb(var(--accent)) !important;
            outline: none !important;
            box-shadow: 0 0 0 3px rgba(var(--accent), 0.1) !important;
        }
        .pagefind-ui__search-clear {
            right: 0.75rem !important;
        }
        .pagefind-ui__result-link {
            color: rgb(var(--accent)) !important;
        }
        .pagefind-ui__form::before {
            left: 1rem !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
        }
    </style>
</Layout>
